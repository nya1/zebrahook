{"swagger":"2.0","info":{"title":"Zebrahook API","description":"Zebrahook API allows to delegate the entire webhook stack.","version":""},"host":"localhost:80","basePath":"/v1","consumes":["application/json"],"produces":["application/json"],"paths":{"/webhook/endpoints":{"post":{"tags":["Zebrahook"],"summary":"register Zebrahook","description":"Allows to register a new webhook URL with the specified enabled events","operationId":"Zebrahook#register","parameters":[{"name":"Authorization","in":"header","required":true,"type":"string"},{"name":"RegisterRequestBody","in":"body","required":true,"schema":{"$ref":"#/definitions/ZebrahookRegisterRequestBody","required":["url","enabled_events"]}}],"responses":{"200":{"description":"OK response.","schema":{"$ref":"#/definitions/ZebrahookRegisterResponseBody","required":["id","secret"]}}},"schemes":["http"],"security":[{"jwt_header_Authorization":[]}]}},"/webhook/endpoints/":{"get":{"tags":["Zebrahook"],"summary":"listWebhookEndpoint Zebrahook","description":"Allows to list and query registered webhook","operationId":"Zebrahook#listWebhookEndpoint","parameters":[{"name":"limit","in":"query","description":"limit how many results to return, use -1 to return all results","required":false,"type":"integer","format":"int32","default":50},{"name":"offset","in":"query","description":"pagination, must be used in combination with limit","required":false,"type":"integer","default":0},{"name":"createdAt.gte","in":"query","description":"filter by createdAt unix (greater than or equal)","required":false,"type":"integer","minimum":0},{"name":"updatedAt.lt","in":"query","description":"filter by updatedAt unix (less than)","required":false,"type":"integer","minimum":0},{"name":"Authorization","in":"header","required":true,"type":"string"}],"responses":{"200":{"description":"OK response.","schema":{"$ref":"#/definitions/ZebrahookListWebhookEndpointResponseBody","required":["result"]}}},"schemes":["http"],"security":[{"jwt_header_Authorization":[]}]}},"/webhook/endpoints/{id}":{"get":{"tags":["Zebrahook"],"summary":"getWebhookEndpointById Zebrahook","description":"Allows to get info about a registered webhook URL via the identifier","operationId":"Zebrahook#getWebhookEndpointById","parameters":[{"name":"id","in":"path","description":"webhook identifier returned in creation","required":true,"type":"string"},{"name":"Authorization","in":"header","required":true,"type":"string"}],"responses":{"200":{"description":"OK response.","schema":{"$ref":"#/definitions/ZebrahookGetWebhookEndpointByIDResponseBody","required":["id","secret","url","enabled_events","createdAt","updatedAt"]}}},"schemes":["http"],"security":[{"jwt_header_Authorization":[]}]},"put":{"tags":["Zebrahook"],"summary":"update Zebrahook","description":"Allows to update a webhook created before","operationId":"Zebrahook#update","parameters":[{"name":"id","in":"path","description":"identifier of the webhook","required":true,"type":"string"},{"name":"Authorization","in":"header","required":true,"type":"string"},{"name":"UpdateRequestBody","in":"body","required":true,"schema":{"$ref":"#/definitions/ZebrahookUpdateRequestBody"}}],"responses":{"200":{"description":"OK response.","schema":{"$ref":"#/definitions/ZebrahookUpdateResponseBody"}}},"schemes":["http"],"security":[{"jwt_header_Authorization":[]}]}},"/webhook/events":{"post":{"tags":["Zebrahook"],"summary":"submitNewEvents Zebrahook","description":"Submit new events, all events will be asynchronously dispatched to all endpoints that are subscribed to the provided event type (`enabled_events`)","operationId":"Zebrahook#submitNewEvents","parameters":[{"name":"Authorization","in":"header","required":true,"type":"string"},{"name":"SubmitNewEventsRequestBody","in":"body","required":true,"schema":{"$ref":"#/definitions/ZebrahookSubmitNewEventsRequestBody","required":["events"]}}],"responses":{"200":{"description":"OK response.","schema":{"$ref":"#/definitions/ZebrahookSubmitNewEventsResponseBody"}}},"schemes":["http"],"security":[{"jwt_header_Authorization":[]}]}}},"definitions":{"EventRequestRequestBody":{"title":"EventRequestRequestBody","type":"object","properties":{"event_content":{"type":"object","description":"event content that will be dispatched (any json object)","example":{"customer":{"address":"Lorem Ipsum 123","country":"NL"},"sku":"002432800","status":"processed"},"additionalProperties":{"type":"string","example":"Qui consequatur officia et explicabo.","format":"binary"}},"event_type":{"type":"string","description":"Event type of the `event_content`","example":"merchant-93842.order.shipped"},"priority":{"type":"integer","description":"Optional priority for this event, an higher number will make this event delivered before other ones","example":1000,"format":"int64"}},"example":{"event_content":{"customer":{"address":"Lorem Ipsum 123","country":"NL"},"sku":"002432800","status":"processed"},"event_type":"merchant-93842.order.shipped","priority":1000},"required":["event_type","event_content"]},"WebhookEndpointWithoutSecretResponseBody":{"title":"WebhookEndpointWithoutSecretResponseBody","type":"object","properties":{"createdAt":{"type":"integer","description":"when this item was created (unix timestamp seconds)","example":1646278413,"format":"int64"},"enabled_events":{"type":"array","items":{"type":"string","example":"your.event_name"},"description":"Enabled events for this webhook URL, regex supported - use `[\"*\"]` to listen to all events","example":["merchant-93842.order.*","my.custom.event"],"minItems":1},"id":{"type":"string","description":"identifier of the webhook","example":"zhwe_c9ddsgbei1cst46tglh0"},"metadata":{"type":"object","description":"Optionally pass any custom metadata (key-\u003evalue)","example":{"anyKeyHere":"any value here"},"additionalProperties":{"type":"string","example":"z","minLength":1}},"status":{"type":"string","description":"status of current endpoint, enabled means that the webhook endpoint is eligible for receiving webhook events","example":"enabled","enum":["enabled","disabled"]},"updatedAt":{"type":"integer","description":"when this item was last updated (unix timestamp seconds)","example":1646369084,"format":"int64"},"url":{"type":"string","description":"URL of the webhook that will be called on each `enabled_events`","example":"https://example.com/notifications","format":"uri"}},"example":{"createdAt":1646278413,"enabled_events":["merchant-93842.order.*","my.custom.event"],"id":"zhwe_c9ddsgbei1cst46tglh0","metadata":{"anyKeyHere":"any value here"},"status":"enabled","updatedAt":1646369084,"url":"https://example.com/notifications"},"required":["id","url","enabled_events","createdAt","updatedAt"]},"ZebrahookGetWebhookEndpointByIDResponseBody":{"title":"ZebrahookGetWebhookEndpointByIDResponseBody","type":"object","properties":{"createdAt":{"type":"integer","description":"when this item was created (unix timestamp seconds)","example":1646278413,"format":"int64"},"enabled_events":{"type":"array","items":{"type":"string","example":"your.event_name"},"description":"Enabled events for this webhook URL, regex supported - use `[\"*\"]` to listen to all events","example":["merchant-93842.order.*","my.custom.event"],"minItems":1},"id":{"type":"string","description":"identifier of the webhook","example":"zhwe_c9ddsgbei1cst46tglh0"},"metadata":{"type":"object","description":"Optionally pass any custom metadata (key-\u003evalue)","example":{"anyKeyHere":"any value here"},"additionalProperties":{"type":"string","example":"s","minLength":1}},"secret":{"type":"string","description":"secret to be used by the webhook to verify the events","example":"zhwhsec_EkXBAkjQZLCtTMtTCoaNatyyiNKARe"},"status":{"type":"string","description":"status of current endpoint, enabled means that the webhook endpoint is eligible for receiving webhook events","example":"disabled","enum":["enabled","disabled"]},"updatedAt":{"type":"integer","description":"when this item was last updated (unix timestamp seconds)","example":1646369084,"format":"int64"},"url":{"type":"string","description":"URL of the webhook that will be called on each `enabled_events`","example":"https://example.com/notifications","format":"uri"}},"example":{"createdAt":1646278413,"enabled_events":["merchant-93842.order.*","my.custom.event"],"id":"zhwe_c9ddsgbei1cst46tglh0","metadata":{"anyKeyHere":"any value here"},"secret":"zhwhsec_EkXBAkjQZLCtTMtTCoaNatyyiNKARe","status":"disabled","updatedAt":1646369084,"url":"https://example.com/notifications"},"required":["id","secret","url","enabled_events","createdAt","updatedAt"]},"ZebrahookListWebhookEndpointResponseBody":{"title":"ZebrahookListWebhookEndpointResponseBody","type":"object","properties":{"result":{"type":"array","items":{"$ref":"#/definitions/WebhookEndpointWithoutSecretResponseBody"},"example":[{"createdAt":1646278413,"enabled_events":["merchant-93842.order.*","my.custom.event"],"id":"zhwe_c9ddsgbei1cst46tglh0","metadata":{"anyKeyHere":"any value here"},"status":"enabled","updatedAt":1646369084,"url":"https://example.com/notifications"},{"createdAt":1646278413,"enabled_events":["merchant-93842.order.*","my.custom.event"],"id":"zhwe_c9ddsgbei1cst46tglh0","metadata":{"anyKeyHere":"any value here"},"status":"enabled","updatedAt":1646369084,"url":"https://example.com/notifications"},{"createdAt":1646278413,"enabled_events":["merchant-93842.order.*","my.custom.event"],"id":"zhwe_c9ddsgbei1cst46tglh0","metadata":{"anyKeyHere":"any value here"},"status":"enabled","updatedAt":1646369084,"url":"https://example.com/notifications"},{"createdAt":1646278413,"enabled_events":["merchant-93842.order.*","my.custom.event"],"id":"zhwe_c9ddsgbei1cst46tglh0","metadata":{"anyKeyHere":"any value here"},"status":"enabled","updatedAt":1646369084,"url":"https://example.com/notifications"}]}},"example":{"result":[{"createdAt":1646278413,"enabled_events":["merchant-93842.order.*","my.custom.event"],"id":"zhwe_c9ddsgbei1cst46tglh0","metadata":{"anyKeyHere":"any value here"},"status":"enabled","updatedAt":1646369084,"url":"https://example.com/notifications"},{"createdAt":1646278413,"enabled_events":["merchant-93842.order.*","my.custom.event"],"id":"zhwe_c9ddsgbei1cst46tglh0","metadata":{"anyKeyHere":"any value here"},"status":"enabled","updatedAt":1646369084,"url":"https://example.com/notifications"},{"createdAt":1646278413,"enabled_events":["merchant-93842.order.*","my.custom.event"],"id":"zhwe_c9ddsgbei1cst46tglh0","metadata":{"anyKeyHere":"any value here"},"status":"enabled","updatedAt":1646369084,"url":"https://example.com/notifications"}]},"required":["result"]},"ZebrahookRegisterRequestBody":{"title":"ZebrahookRegisterRequestBody","type":"object","properties":{"enabled_events":{"type":"array","items":{"type":"string","example":"your.event_name"},"description":"Enabled events for this webhook URL, regex supported - use `[\"*\"]` to listen to all events","example":["merchant-93842.order.*","my.custom.event"],"minItems":1},"metadata":{"type":"object","description":"Optionally pass any custom metadata (key-\u003evalue)","example":{"anyKeyHere":"any value here"},"additionalProperties":{"type":"string","example":"g","minLength":1}},"url":{"type":"string","description":"URL of the webhook that will be called on each `enabled_events`","example":"https://example.com/notifications","format":"uri"}},"example":{"enabled_events":["merchant-93842.order.*","my.custom.event"],"metadata":{"anyKeyHere":"any value here"},"url":"https://example.com/notifications"},"required":["url","enabled_events"]},"ZebrahookRegisterResponseBody":{"title":"ZebrahookRegisterResponseBody","type":"object","properties":{"id":{"type":"string","description":"identifier of the webhook","example":"zhwe_c9ddsgbei1cst46tglh0"},"secret":{"type":"string","description":"secret to be used by the webhook to verify the events","example":"zhwhsec_EkXBAkjQZLCtTMtTCoaNatyyiNKARe"}},"example":{"id":"zhwe_c9ddsgbei1cst46tglh0","secret":"zhwhsec_EkXBAkjQZLCtTMtTCoaNatyyiNKARe"},"required":["id","secret"]},"ZebrahookSubmitNewEventsRequestBody":{"title":"ZebrahookSubmitNewEventsRequestBody","type":"object","properties":{"events":{"type":"array","items":{"$ref":"#/definitions/EventRequestRequestBody"},"example":[{"event_data":{"amount":8000,"currency":"eur","id":372853,"payment_method_details":{"card":{"brand":"visa"}}},"event_type":"merchant-93842.charge.succeeded"},{"event_data":{"customer":{"address":"Lorem Ipsum 33","country":"NL"},"order_id":12643,"sku":"9001-2","type":"A01"},"event_type":"merchant-93842.order.shipped"}]}},"example":{"events":[{"event_data":{"amount":8000,"currency":"eur","id":372853,"payment_method_details":{"card":{"brand":"visa"}}},"event_type":"merchant-93842.charge.succeeded"},{"event_data":{"customer":{"address":"Lorem Ipsum 33","country":"NL"},"order_id":12643,"sku":"9001-2","type":"A01"},"event_type":"merchant-93842.order.shipped"}]},"required":["events"]},"ZebrahookSubmitNewEventsResponseBody":{"title":"ZebrahookSubmitNewEventsResponseBody","type":"object","properties":{"success":{"type":"boolean","example":true}},"example":{"success":true}},"ZebrahookUpdateRequestBody":{"title":"ZebrahookUpdateRequestBody","type":"object","properties":{"disabled":{"type":"boolean","description":"If true this webhook endpoint won't receive any events, set to false to re-enable it","example":true},"enabled_events":{"type":"array","items":{"type":"string","example":"your.event_name"},"description":"Enabled events for this webhook URL, regex supported - use `[\"*\"]` to listen to all events","example":["your.event_name","custom.event.*"]},"metadata":{"type":"object","description":"Optionally pass any custom metadata (key-\u003evalue)","example":{"anyKeyHere":"any value here"},"additionalProperties":{"type":"string","example":"c3","minLength":1}},"url":{"type":"string","description":"URL of the webhook that will be called on each `enabled_events`","example":"https://example.com/notifications","format":"uri"}},"example":{"disabled":true,"enabled_events":["your.event_name","custom.event.*"],"metadata":{"anyKeyHere":"any value here"},"url":"https://example.com/notifications"}},"ZebrahookUpdateResponseBody":{"title":"ZebrahookUpdateResponseBody","type":"object","properties":{"success":{"type":"boolean","example":true}},"example":{"success":false}}},"securityDefinitions":{"jwt_header_Authorization":{"type":"apiKey","description":"Provide a JWT token or an API key","name":"Authorization","in":"header"}}}